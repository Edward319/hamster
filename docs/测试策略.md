# 测试策略 — 保证节点性可运行

> 你是软件工程外行也没关系：测试的目标很明确——**每次到一个「节点」（要发版、要发给别人用）时，能快速确认「应用还能正常跑、核心功能没坏」**。下面说明怎么做、以及如何通过我（AI）帮你完成测试环节。

---

## 一、我们要达成什么（节点性可运行）

- **节点**：例如「准备推送到 GitHub」「准备部署到 Vercel」「准备把链接发给别人」。
- **可运行**：打开应用不报错、主要页面能打开、核心操作（录入、标记用完了、设置、首页提醒、货单总结、发邮件等）能走通，没有明显错乱或数据错。
- **不必追求**：专业级的「100% 自动化、覆盖每一行代码」；先保证**每次节点前有一道固定流程**，能发现大部分问题即可。

---

## 二、两道关卡：自动检查 + 手动清单

### 1. 自动检查（几分钟）

- 在项目里有一个 **`test/index.html`**（测试页），用浏览器打开它，会加载当前的数据与逻辑并跑一批**核心逻辑检查**（例如：设置默认值是否正确、归一化一条记录是否得到预期结构）。
- **何时做**：每次你改完代码、准备提交或发版前，打开一次；页面上全部显示通过即可。
- **我会做的**：功能变多时，我会在对话里提醒你「该补一条自动检查了」，并帮你写好或改好 `test/index.html` 里的用例，你只要在浏览器里打开并看结果。

### 2. 手动清单（十几分钟）

- 在 **`docs/发版前测试清单.md`** 里有一份**发版前必做的手动测试清单**，按「首页 / 库存 / 设置 / 邮件 / Notion」等模块列好要点的项（例如：点进货能弹表单、保存后列表里能看到、切换保存方式后 Notion 区块显示/隐藏正常等）。
- **何时做**：每次到一个「节点」（要推送、要部署、要发给别人）之前，按清单逐项点一遍并打勾。
- **我会做的**：每当我们新增或改了一个功能，我会提醒你「清单里要加一条：xxx」，并直接帮你改好 `docs/发版前测试清单.md`，你只要按更新后的清单再跑一遍即可。

这样：**自动检查**负责兜住「数据与核心逻辑」的回归问题，**手动清单**负责兜住「真实操作和界面、流程」的可运行性，两者一起保证节点性可运行。

---

## 三、你这边具体怎么做（流程）

1. **平时开发**  
   - 你或我改完代码后，若有明显可测的「核心逻辑」（例如新的设置项、新的统计规则），我会在对话里说一句「可以给 test/index.html 加一条检查」，并给出修改方式或直接改好，你只需在浏览器打开测试页确认通过即可。

2. **每次到节点（要推送 / 部署 / 发版）**  
   - 先打开 **`test/index.html`**，确认所有检查通过。  
   - 再打开 **`docs/发版前测试清单.md`**，按顺序在真实环境里（本地或已部署的网址）把清单做一遍并打勾。  
   - 若有某一项不通过：把现象告诉我（例如「点保存后列表没刷新」），我可以帮你定位并改代码，改完再跑一遍清单直到通过。

3. **功能变多时**  
   - 我会根据新功能，主动说「建议在测试清单里加一条：xxx」或「在 test 里加一条自动检查：xxx」，并帮你写好内容，你只要执行即可。

这样，**测试环节是固定的、可重复的**，而且主要由「清单 + 测试页」和我来维护，你不需要自己从零学测试理论，也能保证节点性的可运行。

---

## 四、小结

| 做什么 | 谁维护 | 你做什么 |
|--------|--------|----------|
| 自动检查（核心逻辑） | 我随功能更新 test/index.html | 发版前打开测试页，看是否全过 |
| 手动清单（真实操作） | 我随功能更新 docs/发版前测试清单.md | 发版前按清单点一遍并打勾 |
| 出问题时 | 我根据现象帮你改代码、补用例 | 把现象发给我，改完再跑一遍 |

按这个流程，就能在软件工程上把「测试」环节固定下来，保证每个节点都是可运行的、可放心发给别人用的版本。

---

## 五、如何运行自动检查

- **位置**：项目根目录下的 **`test/index.html`**。
- **方式**：用浏览器直接打开该文件（例如在 Cursor 里右键 `test/index.html` → Open with Live Server，或双击用浏览器打开）。若直接 `file://` 打开，请确认地址栏里是 `.../vibecoding/test/index.html`，这样页面才能正确加载 `../js/data.js`。
- **结果**：页面会列出多条「通过」或「失败」；发版前应全部为「通过」。若有「失败」，把失败项名称和页面上的提示发给我，我可以帮你改代码或改用例。
