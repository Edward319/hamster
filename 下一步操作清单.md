# 接下来一步一步操作清单

> 按顺序做完下面每一步，就能零成本把「存货小管家」上线，并让不同用户各自使用、各自收邮件。  
> 每步做完可以打勾 ☐ → ☑。

---

## 阶段一：把代码放到 GitHub（若还没有仓库）

### 1.1 注册 / 登录 GitHub

- [ ] 打开浏览器，访问：**https://github.com**
- [ ] 若没有账号：点 **Sign up** 注册（用邮箱或手机号）。
- [ ] 若已有账号：点 **Sign in** 登录。

### 1.2 新建一个仓库（Repository）

- [ ] 登录后，右上角点 **「+」** → 选 **New repository**。
- [ ] **Repository name** 填：`vibecoding`（或你喜欢的英文名，不要空格）。
- [ ] **Public** 选上即可。
- [ ] **不要**勾选 "Add a README file"（我们本地已有项目）。
- [ ] 点 **Create repository**。
- [ ] 创建好后，页面上会有一个地址，类似：`https://github.com/你的用户名/vibecoding.git`，先记住或复制下来。

### 1.3 在 Mac 上打开终端，进入项目文件夹

---

**方式 A：用 Cursor 自带的终端（推荐）**

- [ ] **第 1 步**：确认 Cursor 窗口在最前面（用鼠标点一下 Cursor 窗口），并且左侧文件列表里能看到本项目的文件（如 `index.html`、`js` 文件夹、`api` 文件夹等）。
- [ ] **第 2 步**：看屏幕**最上方**的菜单栏（显示「Cursor」或「文件」「编辑」等的那一排）。
  - 用鼠标点一下 **「View」**（或中文版可能是「视图」）。
  - 在下拉菜单里找到 **「Terminal」**（或「终端」），用鼠标点一下。
  - 若没有 Terminal 这一项，再点 **「Command Palette」**（命令面板），在顶部弹出的输入框里输入 **terminal**，在列表里选 **「Terminal: Create New Terminal」** 或「终端: 新建终端」。
- [ ] **第 3 步**：用键盘快捷键（有时比菜单更可靠）：
  - 先确保光标在 Cursor 里（用鼠标点一下 Cursor 的编辑区域）。
  - 同时按 **Control** 键和 **`** 键（反引号）。  
    **反引号 ` 在哪里**：在键盘左上角，数字 **1** 的左边，和波浪号 **~** 在同一个键上，英文状态下按就是 `（不需要按 Shift）。  
  - 若按了没反应：试试 **Command + J**，有时会打开「底部面板」，面板里会有 **「终端」** 或 **「Terminal」** 标签，点一下即可。
- [ ] **第 4 步**：成功的话，Cursor **窗口底部**会多出一块区域，里面有黑色或深色背景、前面有 `%` 或 `$` 符号和一闪一闪的光标，这就是终端。在光标后面就可以输入命令了。
- [ ] **第 5 步**：在终端里输入 **pwd** 然后按 **回车**。若显示的路径最后有 **vibecoding**，说明已经在项目里，**直接做 1.4**。若没有，再输入（把 `penicillin` 换成你 Mac 的登录名）：
  ```bash
  cd /Users/penicillin/vibecoding
  ```
  回车。不知道登录名？在终端输入 **whoami** 回车，屏幕显示的就是。

**如果 Cursor 里始终没有出现终端**：用下面的方式 B，用 Mac 自带的「终端」也可以完成 1.4。**

---

**方式 B：用 Mac 自带的「终端」**

- [ ] **第 1 步**：按键盘 **Command（⌘）+ 空格**，屏幕会弹出 Spotlight 搜索框。
- [ ] **第 2 步**：在搜索框里输入 **终端** 或 **Terminal**（输入「zd」或「ter」一般就能看到「终端」）。
- [ ] **第 3 步**：用鼠标点一下列表里的 **「终端」**（图标像一个黑色小窗口），或选中后按 **回车**，会打开一个独立窗口，里面有黑底白字和 `%` 或 `$` 符号。
- [ ] **第 4 步**：在这个窗口里输入（把 `penicillin` 换成你的 Mac 用户名）：
  ```bash
  cd /Users/penicillin/vibecoding
  ```
  然后按 **回车**。  
  若不知道用户名：先输入 **whoami** 回车，显示的就是。  
  若项目不在「用户」目录：在 Cursor 左侧**右键**点击 **vibecoding** 文件夹 → 选 **Reveal in Finder**（在访达中显示），在 Finder 窗口顶部**把「vibecoding」文件夹拖进终端窗口**，终端会自动填好路径，再按回车即可。

### 1.4 初始化 Git 并推送到 GitHub（若从未在本项目里用过 Git）

- [ ] 依次执行下面命令（一行一行执行，每行回车）：

  ```bash
  git init
  git add .
  git commit -m "Initial: 存货小管家"
  git branch -M main
  git remote add origin https://github.com/你的用户名/vibecoding.git
  git push -u origin main
  ```

- [ ] 把上面命令里的 **`你的用户名/vibecoding`** 换成你在 1.2 里创建的仓库地址中的那一段（例如 `penicillin/vibecoding`）。
- [ ] 若提示要登录 GitHub：按提示在浏览器里完成授权，或使用 Personal Access Token 作为密码。
- [ ] 看到类似 `main -> main`、没有报错，就说明代码已经推到 GitHub。

**若你早就用 Git 连好了这个项目**：只需在项目目录执行 `git add .` → `git commit -m "更新"` → `git push` 即可，然后跳到阶段二。

---

**若 `git push` 一直报错「Failed to connect to github.com port 443」**（网络连不上 GitHub）：
- **仍想上传 GitHub**：见下方 **「解决 443 连不上、坚持用 GitHub 的办法」**（改用 SSH 或 VPN/代理）。
- **不想折腾网络**：可用本文件末尾 **「方案 B：从本机直接部署到 Vercel」**，不经过 GitHub 也能上线。

---

### 解决 443 连不上、坚持用 GitHub 的办法

**办法一：改用 SSH 推送（推荐先试）**  
HTTPS 走 443 端口容易被拦，SSH 走 22 端口，有时能通。你本机用 SSH 密钥，GitHub 不要求你「连上 443」，只要求能连 22。

1. **生成 SSH 密钥**（若已有可跳过）  
   终端执行：
   ```bash
   ssh-keygen -t ed25519 -C "你的邮箱@example.com"
   ```
   提示 **Enter file in which to save the key** 时直接回车（用默认路径）。  
   提示 **Enter passphrase** 时可直接回车（不设密码），或设一个自己记住的密码。

2. **把公钥添加到 GitHub**  
   - 终端执行（复制**整段**输出）：
     ```bash
   cat ~/.ssh/id_ed25519.pub
   ```
   - 复制输出里那一长串（以 `ssh-ed25519` 开头、以你邮箱结尾）。  
   - 浏览器打开 **https://github.com** → 登录 → 右上角头像 → **Settings** → 左侧 **SSH and GPG keys** → **New SSH key**。  
   - **Title** 填 `Mac` 或任意名字，**Key** 里粘贴刚才复制的那一串，点 **Add SSH key**。

3. **把本地仓库的远程地址改成 SSH**  
   终端在项目目录下执行（把 `你的用户名` 和 `仓库名` 换成你的，例如 `Edward319` 和 `hamster`）：
   ```bash
   git remote set-url origin git@github.com:你的用户名/仓库名.git
   ```
   例如：`git remote set-url origin git@github.com:Edward319/hamster.git`

4. **再推送**  
   ```bash
   git push -u origin main
   ```
   若第一次连接 GitHub，会问 **Are you sure you want to continue connecting?** 输入 **yes** 回车。  
   若仍超时，说明你当前网络下 22 端口也连不上，再试办法二或方案 B。

**办法二：用 VPN**  
若你有 VPN，连上能访问国际网站的节点后再执行 `git push -u origin main`（远程地址用 HTTPS 或 SSH 均可）。

**办法三：本机有 HTTP/HTTPS 代理时**  
若电脑已配置代理（例如 `http://127.0.0.1:7890`），让 Git 走代理再推送：
```bash
git config --global http.https://github.com.proxy http://127.0.0.1:7890
git config --global https.https://github.com.proxy http://127.0.0.1:7890
```
把 `7890` 换成你代理的端口。然后执行 `git push -u origin main`。

---

## 阶段二：在 Vercel 部署网站

### 2.1 注册 / 登录 Vercel

- [ ] 打开浏览器，访问：**https://vercel.com**
- [ ] 点 **Sign Up**；建议选 **Continue with GitHub**，用你的 GitHub 账号登录并授权。
- [ ] 登录成功后进入 Vercel 控制台（Dashboard）。

### 2.2 从 GitHub 导入项目

- [ ] 在 Vercel 页面点 **Add New…**（或 **Create**）→ 选 **Project**。
- [ ] 在 **Import Git Repository** 里，找到你的 **vibecoding** 仓库（若没看到，点 **Configure GitHub App** 或 **Adjust GitHub App Permissions** 授权 Vercel 访问该仓库）。
- [ ] 在 vibecoding 那一行点 **Import**。

### 2.3 配置并部署（保持默认即可）

- [ ] **Project Name**：默认是 `vibecoding`，可不动。
- [ ] **Framework Preset**：选 **Other** 或保持默认。
- [ ] **Root Directory**：不填、保持默认。
- [ ] **Build and Output Settings**：不改（我们主要是静态页 + API，无需构建命令）。
- [ ] 直接点 **Deploy**。
- [ ] 等待约 1～2 分钟，直到出现 **Congratulations** 或 **Your project has been deployed**。

### 2.4 拿到你的网站地址

- [ ] 部署完成后，页面会显示一个地址，例如：**https://vibecoding-xxxx.vercel.app**。
- [ ] 点 **Visit** 或复制这个地址，在浏览器新标签页打开。
- [ ] 确认能看到「存货小管家」的首页（今日提醒、库存管理、管家、设置等），说明**网站已上线**。
- [ ] 把这个地址保存下来（记事本或书签），后面自测和分享都要用。

---

## 阶段三：配置发邮件（Resend）

### 3.1 注册 Resend 并创建 API Key

- [ ] 打开新标签页，访问：**https://resend.com**
- [ ] 点 **Start Building** 或 **Sign Up**，用邮箱或 GitHub 注册/登录。
- [ ] 登录后，在左侧菜单或账户菜单里找到 **API Keys**（或 **API Keys** 在 **Developers** 下）。
- [ ] 点 **Create API Key**。
- [ ] **Name** 填：`vibecoding`（或任意名字）。
- [ ] 点 **Add** / **Create**。
- [ ] 创建成功后，页面上会显示一串以 `re_` 开头的 Key，**只显示一次**。
- [ ] 立刻**复制**这串 Key，粘贴到记事本里保存好，关掉这个页面后就看不到了。

### 3.2 在 Vercel 里填环境变量

- [ ] 回到 Vercel 浏览器标签，进入你的 **vibecoding** 项目（若不在，从 Dashboard 点进 vibecoding）。
- [ ] 顶部菜单点 **Settings**。
- [ ] 左侧点 **Environment Variables**。
- [ ] 在 **Key** 输入框填：`RESEND_API_KEY`（必须一模一样）。
- [ ] 在 **Value** 输入框粘贴你刚才复制的 Resend API Key。
- [ ] **Environment** 勾选 **Production**（若有 **Preview** 也可勾选，方便以后测试）。
- [ ] 点 **Save**。

### 3.3 重新部署一次（让环境变量生效）

- [ ] 在 Vercel 项目里，顶部点 **Deployments**。
- [ ] 找到**最新**的那一条部署，右侧点 **⋯**（三个点）。
- [ ] 选 **Redeploy**。
- [ ] 在弹窗里再点 **Redeploy**，等约 1 分钟直到状态变为 **Ready**。
- [ ] 这样云函数才会读到 `RESEND_API_KEY`，发邮件功能才会生效。

---

## 阶段四：自己试一遍（验证邮件能发）

### 4.1 打开已部署的网站

- [ ] 在浏览器里打开你的 Vercel 地址（例如 **https://vibecoding-xxxx.vercel.app**）。

### 4.2 填写通知邮箱

- [ ] 点底部导航的 **设置**。
- [ ] 找到「通知邮箱」输入框，填**你自己的邮箱**（能收信的）。
- [ ] 点保存或确保已自动保存。

### 4.3 发送今日报告

- [ ] 点底部导航回到 **首页**。
- [ ] 找到 **「发送今日报告到邮箱」** 按钮，点击。
- [ ] 若成功：按钮旁会出现「已发送到 xxx@xxx」之类提示。
- [ ] 若失败：会显示错误信息；可到 Vercel → Deployments → 最新部署 → **Functions** → 选 `api/send-report` 看日志排查。

### 4.4 查收邮件

- [ ] 打开你的邮箱（含垃圾邮件/促销文件夹）。
- [ ] 应收到一封「今日报告 — 存货小管家」的邮件，信纸风、带小仓鼠和今日提醒/货单总结。
- [ ] 若收到，说明**整条链路已通**，可以给他人用。

---

## 阶段五：分享给其他人用（多用户）

- [ ] 把你的 Vercel 地址（例如 **https://vibecoding-xxxx.vercel.app**）发给朋友或家人。
- [ ] 对方用手机或电脑浏览器打开即可使用；他们在设置里填**自己的**通知邮箱，点「发送今日报告」就会收到**自己的**报告，数据互不影响。

---

## 方案 B：不经过 GitHub，本机直接部署到 Vercel（网络连不上 GitHub 时用）

当 `git push` 一直报 **Failed to connect to github.com port 443** 时，可以**不用 GitHub**，在本地用 Vercel 命令行直接部署，一样能得到一个可访问的网址。

### B.1 安装 Vercel 命令行工具

- [ ] 终端里确认当前在项目目录（路径包含 vibecoding），然后执行：
  ```bash
  npm install -g vercel
  ```
  若提示没有 `npm`：先安装 Node.js，打开 **https://nodejs.org** 下载 LTS 版本并安装，安装后再执行上面命令。
- [ ] 安装完成后执行 `vercel --version`，有版本号即成功。

### B.2 登录并部署

- [ ] 在项目目录下执行：
  ```bash
  vercel
  ```
- [ ] 第一次会提示 **Log in**：选 **Login**，浏览器会打开 Vercel 页面，用邮箱或 GitHub 登录并授权。
- [ ] 回到终端，按提示操作：
  - **Set up and deploy?** 选 **Y**。
  - **Which scope?** 选你的账号（回车即可）。
  - **Link to existing project?** 选 **N**（新建项目）。
  - **Project name?** 直接回车用默认（vibecoding），或输入一个名字。
  - **In which directory is your code located?** 直接回车（当前目录）。
- [ ] 等待上传和部署，完成后终端会显示 **Production** 地址，例如 **https://vibecoding-xxx.vercel.app**。
- [ ] 用浏览器打开这个地址，能看到「存货小管家」即部署成功。**之后从阶段三（配置 Resend）继续做即可**，阶段二里「从 GitHub 导入」那部分可跳过。

### B.3 以后改了代码想更新网站

在项目目录执行：
```bash
vercel --prod
```
即可把当前代码再次部署到线上。

---

## 小结

| 阶段 | 做完什么 | 结果 |
|------|----------|------|
| 一 | 代码推到 GitHub | 网上有一份代码仓库 |
| 二 | Vercel 导入并部署 | 有一个可访问的网址 |
| 三 | Resend API Key + Vercel 环境变量 + Redeploy | 发邮件功能可用 |
| 四 | 自己填邮箱、点发送、收邮件 | 验证功能正常 |
| 五 | 把网址发给别人 | 不同用户各自使用、各自收邮件 |

全部打勾后，零成本部署与多用户使用就完成了。  
**未来会开发 Notion 数据同步**：各用户连接自己的 Notion，调用各自数据，继续保持 0 成本（已记在《需求说明》与《零成本部署与多用户使用指南》中）。
